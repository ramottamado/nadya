{%- include constants.liquid -%}

{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "{{ site_url }}#organization",
      "name": "{{ site.title }}",
      "url": "{{ site_url }}",
      {% if site.fb_username or site.ig_username or site.twitter_username -%}
      "sameAs": [
      {%- if site.fb_username %}
        "{{ site.fb_username | prepend: 'https://facebook.com/' }}"{% if site.ig_username or site.twitter_username %},{% endif %}
      {%- endif %}
      {%- if site.ig_username %}
        "{{ site.ig_username | prepend: 'https://instagram.com/' }}"{% if site.twitter_username %},{% endif %}
      {%- endif %}
      {%- if site.twitter_username %}
        "{{ site.twitter_username | prepend: 'https://twitter.com/' }}"
      {%- endif %}
      ],
      {%- endif %}
      "logo": {
        "@type": "ImageObject",
        "@id": "{{ site_url }}#logo",
        "inLanguage": "en-US",
        "url": "{{ logo }}",
        "width": 512,
        "height": 512,
        "caption": "{{ site.title }}"
      },
      "image": { "@id": "{{ site_url }}#logo" }
    },
    {
      "@type": "WebSite",
      "@id": "{{ site_url }}#website",
      "url": "{{ site_url }}",
      "name": "{{ site.title }}",
      "description": "{{ site_description }}",
      "publisher": { "@id": "{{ site_url }}#organization" },
      "inLanguage": "en-US"
    }{%- if page.layout == "home" %},
    {
      "@type": "CollectionPage",
      "@id": "{{ site_url }}#webpage",
      "url": "{{ site_url }}",
      "name": "{{ site.title }}",
      "isPartOf": { "@id": "{{ site_url }}#website" },
      "about": { "@id": "{{ site_url }}#organization" },
      "description": "{{ site_description }}",
      "inLanguage": "en-US"
    }{%- elsif page.layout == "page" %},
    {
      "@type": "ImageObject",
      "@id": "{{ page_url }}#primaryimage",
      "inLanguage": "en-US",
      "url": "{{ image }}"
    },
    {
      "@type": "WebPage",
      "@id": "{{ page_url }}#webpage",
      "url": "{{ page_url }}",
      "name": "{{ page.title }} &mdash; {{ site.title }}",
      "isPartOf": { "@id": "{{ site_url }}#website" },
      "primaryImageOfPage": {
        "@id": "{{ page_url }}#primaryimage"
      },
      "inLanguage": "en-US",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": ["{{ page_url }}"]
        }
      ]
    }{%- elsif page.layout == "post" %},
    {
      "@type": "ImageObject",
      "@id": "{{ page_url }}#primaryimage",
      "inLanguage": "en-US",
      "url": "{{ image }}"
    },
    {
      "@type": "WebPage",
      "@id": "{{ page_url }}#webpage",
      "url": "{{ page_url }}",
      "name": "{{ title }}",
      "isPartOf": { "@id": "{{ site_url }}#website" },
      "primaryImageOfPage": { "@id": "{{ page_url }}#primaryimage" },
      "datePublished": "{{ page.date | date_to_xmlschema }}",
      "dateModified": "{%- if page.modified -%}{{ page.modified | date_to_xmlschema }}{% else %}{{ page.date | date_to_xmlschema }}{%- endif -%}",
      "description": "{{ description }}",
      "inLanguage": "en-US",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": [
            "{{ page_url }}"
          ]
        }
      ]
    },
    {
      "@type": "NewsArticle",
      "@id": "{{ page_url }}#article",
      "isPartOf": { "@id": "{{ page_url }}#webpage" },
      "author": { "@id": "{{ page_url }}#author" },
      "headline": "{{ title }}",
      "datePublished": "{{ page.date | date_to_xmlschema }}",
      "dateModified": "{%- if page.modified -%}{{ page.modified | date_to_xmlschema }}{% else %}{{ page.date | date_to_xmlschema }}{%- endif -%}",
      "mainEntityOfPage": { "@id": "{{ page_url }}#webpage" },
      "publisher": { "@id": "{{ site_url }}#organization" },
      "image": { "@id": "{{ page_url }}#primaryimage" },
      "keywords": "{{ page.keywords }}",
      "articleSection": "News",
      "inLanguage": "en-US",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": ["{{ page_url }}"]
        }
      ],
      "copyrightYear": "{{ 'now' | date: "%Y" }}",
      "copyrightHolder": { "@id": "{{ site_url }}#organization" }
    },
    {
      "@type": ["Person"],
      "@id": "{{ page_url }}#author",
      "name": "{{ author }}",
      "image": {
        "@type": "ImageObject",
        "@id": "{{ site_url }}#personlogo",
        "inLanguage": "en-US",
        "url": "{{ site.gravatar_author }}",
        "caption": "{{ author }}"
      },
      "description": "{{ author }}",
      "sameAs": ["https://twitter.com/{{ site.twitter_username }}"]
    }
    {%- endif %}
  ]
}
